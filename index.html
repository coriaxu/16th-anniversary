<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>致Minnie：我们的时光档案</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Noto+Serif+SC:wght@300;400;600&family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=ZCOOL+XiaoWei&family=Allura&display=swap"
        rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
        <link
            href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Noto+Serif+SC:wght@300;400;600&family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=ZCOOL+XiaoWei&family=Allura&display=swap"
            rel="stylesheet">
    </noscript>

    <style>
        /* ============ 修复补丁：强制隐藏弹窗 ============ */
        #modal {
            display: none;
            /* 默认必须隐藏 */
            position: fixed;
            z-index: 9999;
            /* 确保在最上层 */
        }

        /* 激活状态 */
        #modal.modal-active {
            display: flex !important;
            /* 强制显示 */
        }

        :root {
            /* ============ 默认主题：干枯玫瑰 (Dried Rose) ============ */
            --bg-paper: #FDFBF7;
            --primary-color: #B05D67;
            --accent-color: #C96E78;
            --light-color: #E8D3D5;
            --ink-grey: #333333;
            --text-gold: #8B6914;
            --text-gold-light: #A67C52;
            --glass-border: rgba(255, 255, 255, 0.6);

            --duration-fast: 0.2s;
            --duration-normal: 0.3s;
            --duration-slow: 1.2s;
        }

        /* 纪念日自动变色逻辑 (Mode A) */
        body.theme-mist {
            --bg-paper: #F6F8F7;
            --primary-color: #5F8D84;
            --accent-color: #7DAEA5;
            --light-color: #DDEBE8;
            --text-gold: #947C5C;
            --text-gold-light: #B09A7A;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-paper);
            color: var(--ink-grey);
            font-family: 'Noto Serif SC', 'Songti SC', serif;
            line-height: 1.8;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            transition: background-color 1s ease, color 1s ease;
        }

        /* 字体 */
        .rounded-num-font {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .num-font {
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            letter-spacing: -0.05em;
        }

        .eng-label {
            font-family: 'Cinzel', serif;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .eng-title {
            font-family: 'Playfair Display', serif;
        }

        .text-gold-enhanced {
            color: var(--text-gold);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
        }

        /* 动画 */
        @media (prefers-reduced-motion: no-preference) {
            .animate-fade-up {
                opacity: 0;
                transform: translateY(40px);
                transition: opacity 0.8s ease, transform 0.8s ease;
            }

            .animate-fade-up.visible {
                opacity: 1;
                transform: translateY(0);
            }

            .animate-pulse-1s {
                animation: pulseOneSecond 1s infinite ease-in-out;
                transform-origin: center bottom;
            }

            .animate-float {
                animation: floatBlob 10s infinite alternate;
            }

            .heart-beat-num {
                animation: heartScale 0.8s infinite ease-in-out;
                display: inline-block;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .animate-fade-up {
                opacity: 1;
                transform: none;
            }

            .animate-pulse-1s {
                animation: none;
            }
        }

        @keyframes pulseOneSecond {
            0% {
                transform: scale(1);
            }

            15% {
                transform: scale(1.02);
            }

            30% {
                transform: scale(1);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floatBlob {
            0% {
                transform: translate(0, 0) scale(1);
            }

            100% {
                transform: translate(30px, -30px) scale(1.1);
            }
        }

        @keyframes heartScale {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
                color: var(--accent-color);
            }
        }

        .entrance-heart {
            background: var(--primary-color);
        }

        .entrance-heart::before,
        .entrance-heart::after {
            background: var(--primary-color);
        }

        .entrance-text {
            color: var(--primary-color);
        }

        .aurora-blob {
            position: absolute;
            background: radial-gradient(circle, var(--light-color) 0%, transparent 70%);
            filter: blur(50px);
            opacity: 0.6;
            z-index: 0;
        }

        .text-primary {
            color: var(--primary-color);
        }

        .bg-primary {
            background-color: var(--primary-color);
        }

        .border-primary {
            border-color: var(--primary-color);
        }

        /* 组件样式 */
        .crystal-glass {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05), inset 0 0 20px rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
            transition: transform var(--duration-normal) ease;
        }

        .crystal-glass:active {
            transform: scale(0.98);
        }

        .jewelry-frame-inner {
            position: relative;
            width: 260px;
            height: 420px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 20px 60px -10px rgba(0, 0, 0, 0.15);
            border: 1px solid white;
            z-index: 10;
            transition: transform 0.5s ease;
            overflow: hidden;
        }

        .jewelry-frame-glass-overlay {
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(1px);
            z-index: 20;
            pointer-events: none;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.3);
        }

        .amber-card {
            background: linear-gradient(145deg, #FFFDF8 0%, #FFF8E7 50%, #FAEBD7 100%);
            border: 1px solid rgba(184, 146, 85, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        body.theme-mist .amber-card {
            background: linear-gradient(145deg, #F9FCFB 0%, #F0F7F5 100%);
            border-color: rgba(95, 141, 132, 0.2);
        }

        .amber-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.3) 50%, transparent 60%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }

            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }

        .card-story {
            background: #fff;
            border: 1px solid #f2efeb;
            position: relative;
            padding: 2.5rem 2rem;
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.05);
            transition: transform var(--duration-normal) ease;
        }

        .card-story::before {
            content: '';
            position: absolute;
            left: 0;
            top: 20px;
            bottom: 20px;
            width: 4px;
            background: var(--primary-color);
            border-radius: 0 4px 4px 0;
        }

        .watermark-year {
            position: absolute;
            top: -1.5rem;
            right: -0.5rem;
            font-size: 5rem;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: var(--primary-color);
            opacity: 0.06;
            line-height: 1;
            pointer-events: none;
            z-index: 0;
        }

        .pull-quote-mark {
            position: absolute;
            top: -1rem;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            line-height: 1;
            color: var(--primary-color);
            opacity: 0.15;
            pointer-events: none;
        }

        .music-toast {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid var(--light-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 90;
            pointer-events: none;
        }

        .music-toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .music-toast-icon {
            width: 8px;
            height: 8px;
            background: var(--primary-color);
            border-radius: 50%;
            animation: heartScale 1s infinite;
        }

        .cta-btn::after {
            background: var(--text-gold);
        }

        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--text-gold));
            z-index: 1001;
            transform-origin: left;
            transform: scaleX(0);
        }

        .date-stamp {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            transform: rotate(3deg);
            opacity: 0.6;
        }

        .music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            border: 1px solid var(--primary-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            transition: all var(--duration-normal) ease;
        }

        .music-toggle:hover {
            transform: scale(1.1);
        }

        .music-toggle.playing {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .music-toggle.playing svg {
            color: white;
        }

        .entrance-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg-paper);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s ease;
            padding: 2rem;
        }

        .entrance-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        /* 入场页心形徽章 - 图片版 */
        .entrance-heart-img {
            width: 160px;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(176, 29, 29, 0.4));
            animation: heartPulse 3s ease-in-out infinite;
            margin-bottom: 2rem;
        }

        @keyframes heartPulse {

            0%,
            100% {
                transform: scale(1);
                filter: drop-shadow(0 0 25px rgba(176, 29, 29, 0.4));
            }

            50% {
                transform: scale(1.05);
                filter: drop-shadow(0 0 35px rgba(176, 29, 29, 0.6));
            }
        }

        /* 入场页文案 - 还原版 */
        .entrance-title {
            font-family: 'Noto Serif SC', 'Songti SC', serif;
            font-size: 2rem;
            font-weight: 600;
            color: #5D4037;
            /* 深咖啡色 */
            text-align: center;
            line-height: 1.4;
            margin-bottom: 0.5rem;
            letter-spacing: 0.05em;
            text-shadow: none;
        }

        .entrance-subtitle {
            font-family: 'Noto Serif SC', serif;
            font-weight: 400;
            font-size: 1.2rem;
            color: #8D6E63;
            /* 浅咖啡色 */
            text-align: center;
            margin-bottom: 5rem;
            letter-spacing: 0.1em;
            opacity: 1;
        }

        @media (min-width: 768px) {
            .entrance-title {
                font-size: 2.8rem;
                margin-bottom: 1rem;
            }

            .entrance-subtitle {
                font-size: 1.5rem;
                letter-spacing: 0.15em;
            }

            .entrance-heart-img {
                width: 200px;
                margin-bottom: 3rem;
            }
        }

        /* 入场按钮 - 深红色还原版 */
        .entrance-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 14px 48px;
            background: linear-gradient(180deg, #A6343A 0%, #8B1E25 100%);
            border: 2px solid #C5A065;
            /* 金色边框 */
            border-radius: 999px;
            font-family: 'Noto Serif SC', serif;
            font-weight: 500;
            font-size: 1.1rem;
            letter-spacing: 0.1em;
            color: #FFF8E7;
            /* 浅金色文字 */
            cursor: pointer;
            box-shadow:
                0 4px 15px rgba(139, 30, 37, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.2),
                inset 0 -1px 2px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .entrance-btn:hover {
            transform: translateY(-2px);
            background: linear-gradient(180deg, #B5444A 0%, #9C272E 100%);
            box-shadow: 0 8px 25px rgba(139, 30, 37, 0.5);
            border-color: #D4AF37;
        }

        .entrance-btn:active {
            transform: scale(0.98);
        }

        .entrance-btn::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border-radius: 999px;
            border: 1px solid var(--primary-color);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .entrance-btn:focus-visible::after {
            opacity: 0.5;
        }

        .entrance-btn svg {
            display: none;
        }

        /* 设计图中没有图标 */
        .card-partner {
            background: linear-gradient(to bottom right, #fff, #fdfbf7);
            border: 1px solid rgba(184, 146, 85, 0.2);
            padding: 2.5rem 2rem;
            position: relative;
            box-shadow: 0 15px 40px -10px rgba(184, 146, 85, 0.1);
            text-align: right;
        }

        .card-partner::after {
            content: '';
            position: absolute;
            right: 0;
            top: 20px;
            bottom: 20px;
            width: 4px;
            background: var(--text-gold);
            border-radius: 4px 0 0 4px;
        }

        .card-crystal-ultimate {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(232, 211, 213, 0.3) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 30px 60px -15px rgba(176, 93, 103, 0.2), inset 0 0 30px rgba(255, 255, 255, 0.5);
            border-radius: 24px;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .card-crystal-ultimate::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
        }

        .badge-today {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--primary-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.625rem;
            letter-spacing: 0.1em;
        }

        .cta-btn {
            position: relative;
            overflow: visible;
        }

        .cta-btn::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: var(--text-gold);
            opacity: 0;
            transform: scale(1);
            transition: all 0.3s ease;
        }

        .cta-btn.burst::after {
            animation: burst 0.6s ease-out forwards;
        }

        @keyframes burst {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }

            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        /* 模态框样式修复 */
        .modal-backdrop {
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(40, 35, 35, 0.6);
            backdrop-filter: blur(8px);
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity var(--duration-normal) ease;
        }

        .modal-backdrop.modal-active {
            opacity: 1;
        }

        .modal-content {
            position: relative;
            width: 100%;
            max-width: 380px;
            padding: 1.5rem;
            transform: scale(0.9) translateY(20px);
            transition: transform var(--duration-normal) cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-active .modal-content {
            transform: scale(1) translateY(0);
        }

        .close-btn {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: absolute;
            top: -12px;
            right: 0;
            z-index: 50;
            border: none;
            cursor: pointer;
            transition: transform var(--duration-fast) ease;
        }

        .corner-accent {
            position: absolute;
            width: 24px;
            height: 24px;
            border-color: var(--text-gold);
            z-index: 30;
            opacity: 0.7;
        }

        .tl {
            top: -10px;
            left: -10px;
            border-top: 2px solid;
            border-left: 2px solid;
        }

        .br {
            bottom: -10px;
            right: -10px;
            border-bottom: 2px solid;
            border-right: 2px solid;
        }

        .sound-wave {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 20px;
        }

        .sound-wave span {
            width: 3px;
            background: currentColor;
            border-radius: 2px;
            animation: soundWave 0.5s ease-in-out infinite alternate;
        }

        .sound-wave span:nth-child(1) {
            height: 30%;
            animation-delay: 0s;
        }

        .sound-wave span:nth-child(2) {
            height: 60%;
            animation-delay: 0.1s;
        }

        .sound-wave span:nth-child(3) {
            height: 100%;
            animation-delay: 0.2s;
        }

        .sound-wave span:nth-child(4) {
            height: 60%;
            animation-delay: 0.3s;
        }

        .sound-wave span:nth-child(5) {
            height: 30%;
            animation-delay: 0.4s;
        }

        @keyframes soundWave {
            0% {
                transform: scaleY(0.5);
            }

            100% {
                transform: scaleY(1);
            }
        }

        .film-grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            z-index: 999;
        }

        /* ============ 宽屏响应式优化 (≥1024px) ============ */
        @media (min-width: 1024px) {

            /* 放大照片框架 */
            .jewelry-frame-inner {
                width: 360px;
                height: 540px;
            }

            /* 放大卡片字体和 padding */
            .card-story {
                padding: 3.5rem 3rem;
            }

            .card-story p {
                font-size: 1.1rem;
                line-height: 2;
            }

            .watermark-year {
                font-size: 7rem;
            }

            /* 放大数字计数器 */
            #days-counter {
                font-size: 12rem !important;
            }

            /* 放大时间计数器卡片 */
            #hours-counter,
            #minutes-counter {
                font-size: 2.5rem;
            }

            #seconds-counter {
                font-size: 5rem;
            }

            #heartbeat-counter {
                font-size: 1.5rem;
            }

            /* 放大引言和标题 */
            .eng-title {
                font-size: 2.2rem;
            }

            .pull-quote-container p {
                font-size: 1.3rem;
            }

            /* 放大 CTA 按钮 */
            .cta-btn {
                padding: 1.5rem 3rem;
                font-size: 1.1rem;
            }

            /* 卡片间距加大 */
            .space-y-16 {
                gap: 5rem;
            }
        }

        /* ============ 超宽屏响应式优化 (≥1280px) ============ */
        @media (min-width: 1280px) {
            .jewelry-frame-inner {
                width: 400px;
                height: 600px;
            }

            #days-counter {
                font-size: 14rem !important;
            }

            .card-story {
                padding: 4rem 3.5rem;
            }

            .card-story p {
                font-size: 1.2rem;
            }

            .card-crystal-ultimate {
                padding: 4rem 3rem;
            }

            .card-crystal-ultimate h3 {
                font-size: 3rem;
            }
        }

        /* ============ 城市足迹卡片样式 - 电影级视觉 ============ */
        .city-card {
            position: relative;
            background:
                linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(253, 251, 247, 0.9) 100%),
                radial-gradient(ellipse at top left, rgba(176, 93, 103, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(232, 211, 213, 0.12), transparent 50%);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow:
                0 1px 1px rgba(0,0,0,0.025),
                0 2px 2px rgba(0,0,0,0.025),
                0 4px 4px rgba(0,0,0,0.025),
                0 8px 8px rgba(0,0,0,0.025),
                0 16px 16px rgba(0,0,0,0.025),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(255, 255, 255, 0.3);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            overflow: hidden;
            transform: perspective(1000px) rotateX(0deg) rotateY(0deg);
        }

        .city-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.8) 0%,
                rgba(176, 93, 103, 0.15) 50%,
                rgba(232, 211, 213, 0.2) 100%);
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.6s ease;
            pointer-events: none;
            z-index: -1;
            filter: blur(12px);
        }

        .city-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg,
                transparent 30%,
                rgba(255, 255, 255, 0.15) 50%,
                transparent 70%);
            transform: translateX(-100%) translateY(-100%) rotate(45deg);
            transition: transform 0.8s ease;
            pointer-events: none;
        }

        .city-card:hover {
            transform: perspective(1000px) translateY(-8px) scale(1.02);
            box-shadow:
                0 2px 4px rgba(0,0,0,0.03),
                0 4px 8px rgba(0,0,0,0.03),
                0 8px 16px rgba(0,0,0,0.03),
                0 16px 32px rgba(0,0,0,0.03),
                0 24px 48px rgba(176, 93, 103, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 1),
                inset 0 -1px 0 rgba(255, 255, 255, 0.5);
            border-color: rgba(176, 93, 103, 0.3);
        }

        .city-card:hover::before {
            opacity: 1;
        }

        .city-card:hover::after {
            transform: translateX(100%) translateY(100%) rotate(45deg);
        }

        /* ============ 省份主题色系 ============ */

        /* 北京 - 金色（家） */
        .city-card-beijing {
            background:
                linear-gradient(135deg, rgba(255, 253, 248, 0.98) 0%, rgba(255, 248, 231, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(139, 105, 20, 0.12), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(197, 160, 101, 0.15), transparent 50%);
            border-color: rgba(197, 160, 101, 0.3);
        }

        .city-card-beijing::before {
            background: linear-gradient(135deg,
                rgba(255, 248, 231, 0.9) 0%,
                rgba(139, 105, 20, 0.2) 50%,
                rgba(197, 160, 101, 0.25) 100%);
        }

        /* 安徽 - 粉红色（春节） */
        .city-card-anhui {
            background:
                linear-gradient(135deg, rgba(255, 245, 250, 0.98) 0%, rgba(252, 231, 243, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(219, 39, 119, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(236, 72, 153, 0.10), transparent 50%);
            border-color: rgba(236, 72, 153, 0.25);
        }

        .city-card-anhui::before {
            background: linear-gradient(135deg,
                rgba(255, 245, 250, 0.9) 0%,
                rgba(219, 39, 119, 0.15) 50%,
                rgba(236, 72, 153, 0.18) 100%);
        }

        /* 江苏 - 蓝紫色 */
        .city-card-jiangsu {
            background:
                linear-gradient(135deg, rgba(245, 247, 255, 0.98) 0%, rgba(237, 242, 255, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(79, 70, 229, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(99, 102, 241, 0.10), transparent 50%);
            border-color: rgba(99, 102, 241, 0.25);
        }

        .city-card-jiangsu::before {
            background: linear-gradient(135deg,
                rgba(245, 247, 255, 0.9) 0%,
                rgba(79, 70, 229, 0.15) 50%,
                rgba(99, 102, 241, 0.18) 100%);
        }

        /* 上海 - 紫色（演唱会） */
        .city-card-shanghai {
            background:
                linear-gradient(135deg, rgba(250, 245, 255, 0.98) 0%, rgba(243, 232, 255, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(147, 51, 234, 0.10), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(168, 85, 247, 0.12), transparent 50%);
            border-color: rgba(168, 85, 247, 0.3);
        }

        .city-card-shanghai::before {
            background: linear-gradient(135deg,
                rgba(250, 245, 255, 0.9) 0%,
                rgba(147, 51, 234, 0.18) 50%,
                rgba(168, 85, 247, 0.22) 100%);
        }

        /* 宁夏 - 黄土色 */
        .city-card-ningxia {
            background:
                linear-gradient(135deg, rgba(254, 252, 245, 0.98) 0%, rgba(254, 243, 199, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(180, 83, 9, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(217, 119, 6, 0.10), transparent 50%);
            border-color: rgba(217, 119, 6, 0.25);
        }

        .city-card-ningxia::before {
            background: linear-gradient(135deg,
                rgba(254, 252, 245, 0.9) 0%,
                rgba(180, 83, 9, 0.15) 50%,
                rgba(217, 119, 6, 0.18) 100%);
        }

        /* 甘肃 - 丹霞橙红色 */
        .city-card-gansu {
            background:
                linear-gradient(135deg, rgba(255, 247, 243, 0.98) 0%, rgba(254, 237, 227, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(234, 88, 12, 0.10), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(249, 115, 22, 0.12), transparent 50%);
            border-color: rgba(249, 115, 22, 0.28);
        }

        .city-card-gansu::before {
            background: linear-gradient(135deg,
                rgba(255, 247, 243, 0.9) 0%,
                rgba(234, 88, 12, 0.18) 50%,
                rgba(249, 115, 22, 0.22) 100%);
        }

        /* 青海 - 深蓝色 */
        .city-card-qinghai {
            background:
                linear-gradient(135deg, rgba(239, 246, 255, 0.98) 0%, rgba(219, 234, 254, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(37, 99, 235, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(59, 130, 246, 0.10), transparent 50%);
            border-color: rgba(59, 130, 246, 0.25);
        }

        .city-card-qinghai::before {
            background: linear-gradient(135deg,
                rgba(239, 246, 255, 0.9) 0%,
                rgba(37, 99, 235, 0.15) 50%,
                rgba(59, 130, 246, 0.18) 100%);
        }

        /* 山西 - 灰褐色（回家） */
        .city-card-shanxi {
            background:
                linear-gradient(135deg, rgba(250, 250, 249, 0.98) 0%, rgba(245, 243, 240, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(87, 83, 78, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(120, 113, 108, 0.10), transparent 50%);
            border-color: rgba(120, 113, 108, 0.25);
        }

        .city-card-shanxi::before {
            background: linear-gradient(135deg,
                rgba(250, 250, 249, 0.9) 0%,
                rgba(87, 83, 78, 0.15) 50%,
                rgba(120, 113, 108, 0.18) 100%);
        }

        /* 江西 - 青瓷色 */
        .city-card-jiangxi {
            background:
                linear-gradient(135deg, rgba(240, 253, 250, 0.98) 0%, rgba(204, 251, 241, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(20, 184, 166, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(45, 212, 191, 0.10), transparent 50%);
            border-color: rgba(45, 212, 191, 0.25);
        }

        .city-card-jiangxi::before {
            background: linear-gradient(135deg,
                rgba(240, 253, 250, 0.9) 0%,
                rgba(20, 184, 166, 0.15) 50%,
                rgba(45, 212, 191, 0.18) 100%);
        }

        /* 河南 - 橙黄色 */
        .city-card-henan {
            background:
                linear-gradient(135deg, rgba(255, 251, 235, 0.98) 0%, rgba(254, 243, 199, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(245, 158, 11, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(251, 191, 36, 0.10), transparent 50%);
            border-color: rgba(251, 191, 36, 0.25);
        }

        .city-card-henan::before {
            background: linear-gradient(135deg,
                rgba(255, 251, 235, 0.9) 0%,
                rgba(245, 158, 11, 0.15) 50%,
                rgba(251, 191, 36, 0.18) 100%);
        }

        /* 福建 - 海蓝色 */
        .city-card-fujian {
            background:
                linear-gradient(135deg, rgba(240, 249, 255, 0.98) 0%, rgba(224, 242, 254, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(14, 165, 233, 0.08), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(56, 189, 248, 0.10), transparent 50%);
            border-color: rgba(56, 189, 248, 0.25);
        }

        .city-card-fujian::before {
            background: linear-gradient(135deg,
                rgba(240, 249, 255, 0.9) 0%,
                rgba(14, 165, 233, 0.15) 50%,
                rgba(56, 189, 248, 0.18) 100%);
        }

        .city-card-home:hover {
            border-color: rgba(139, 105, 20, 0.4);
            box-shadow:
                0 4px 8px rgba(139,105,20,0.04),
                0 8px 16px rgba(139,105,20,0.04),
                0 16px 32px rgba(139,105,20,0.06),
                0 24px 48px rgba(139,105,20,0.08),
                0 32px 64px rgba(139,105,20,0.1),
                inset 0 1px 0 rgba(255, 255, 255, 1);
        }

        .city-card-content {
            position: relative;
            z-index: 2;
        }

        /* 装饰性光效 */
        .city-card-decoration {
            position: absolute;
            bottom: -40px;
            right: -40px;
            width: 250px;
            height: 250px;
            background:
                radial-gradient(circle, var(--light-color) 0%, transparent 50%),
                radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.5), transparent 40%);
            opacity: 0.15;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            pointer-events: none;
            filter: blur(60px);
            mix-blend-mode: soft-light;
        }

        .city-card:hover .city-card-decoration {
            opacity: 0.3;
            transform: scale(1.3) rotate(45deg);
            filter: blur(70px);
        }

        /* 徽章样式 - 精致设计 */
        .city-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 999px;
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.08em;
            box-shadow:
                0 2px 4px rgba(176, 93, 103, 0.2),
                0 4px 8px rgba(176, 93, 103, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .city-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .city-card:hover .city-badge::before {
            left: 100%;
        }

        .city-badge-spring {
            background: linear-gradient(135deg, #FF6B9D 0%, #FFA07A 100%);
            box-shadow:
                0 2px 4px rgba(255, 107, 157, 0.2),
                0 4px 8px rgba(255, 107, 157, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-music {
            background: linear-gradient(135deg, #9D50BB 0%, #6E48AA 100%);
            font-size: 0.85rem;
            padding: 0.45rem 1.1rem;
            box-shadow:
                0 2px 4px rgba(157, 80, 187, 0.25),
                0 4px 8px rgba(157, 80, 187, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-journey {
            background: linear-gradient(135deg, #F79D00 0%, #FFB347 50%, #64f38c 100%);
            padding: 0.5rem 1.2rem;
            box-shadow:
                0 2px 4px rgba(247, 157, 0, 0.25),
                0 4px 8px rgba(247, 157, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-autumn {
            background: linear-gradient(135deg, #FF512F 0%, #DD2476 100%);
            box-shadow:
                0 2px 4px rgba(255, 81, 47, 0.25),
                0 4px 8px rgba(255, 81, 47, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-mayday {
            background: linear-gradient(135deg, #F79D00 0%, #FFB347 50%, #64f38c 100%);
            padding: 0.5rem 1.2rem;
            box-shadow:
                0 2px 4px rgba(247, 157, 0, 0.25),
                0 4px 8px rgba(247, 157, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-national {
            background: linear-gradient(135deg, #FF512F 0%, #F09819 100%);
            padding: 0.5rem 1.2rem;
            box-shadow:
                0 2px 4px rgba(255, 81, 47, 0.25),
                0 4px 8px rgba(255, 81, 47, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-duanwu {
            background: linear-gradient(135deg, #78716c 0%, #a8a29e 100%);
            padding: 0.5rem 1.2rem;
            box-shadow:
                0 2px 4px rgba(120, 113, 108, 0.25),
                0 4px 8px rgba(120, 113, 108, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-dream {
            background: linear-gradient(135deg, #9D50BB 0%, #6E48AA 100%);
            padding: 0.5rem 1.2rem;
            box-shadow:
                0 2px 4px rgba(157, 80, 187, 0.25),
                0 4px 8px rgba(157, 80, 187, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .city-badge-birthday {
            background: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);
            padding: 0.5rem 1.2rem;
            box-shadow:
                0 2px 4px rgba(79, 70, 229, 0.25),
                0 4px 8px rgba(79, 70, 229, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* 特殊卡片 - 上海演唱会 */
        .city-card-special {
            background:
                linear-gradient(135deg, rgba(255, 245, 248, 0.98) 0%, rgba(249, 240, 255, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(157, 80, 187, 0.12), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(110, 72, 170, 0.15), transparent 50%);
            border-color: rgba(157, 80, 187, 0.3);
        }

        .city-card-special::before {
            background: linear-gradient(135deg,
                rgba(249, 240, 255, 0.9) 0%,
                rgba(157, 80, 187, 0.2) 50%,
                rgba(110, 72, 170, 0.25) 100%);
        }

        .city-card-special:hover {
            border-color: rgba(157, 80, 187, 0.4);
            box-shadow:
                0 4px 8px rgba(157,80,187,0.04),
                0 8px 16px rgba(157,80,187,0.04),
                0 16px 32px rgba(157,80,187,0.06),
                0 24px 48px rgba(157,80,187,0.12),
                inset 0 1px 0 rgba(255, 255, 255, 1);
        }

        /* 旅程卡片 */
        .city-card-journey {
            background:
                linear-gradient(135deg, rgba(255, 250, 240, 0.98) 0%, rgba(255, 248, 220, 0.95) 100%),
                radial-gradient(ellipse at top left, rgba(247, 157, 0, 0.12), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(255, 179, 71, 0.15), transparent 50%);
            border-color: rgba(247, 157, 0, 0.3);
        }

        .city-card-journey::before {
            background: linear-gradient(135deg,
                rgba(255, 248, 220, 0.9) 0%,
                rgba(247, 157, 0, 0.2) 50%,
                rgba(255, 179, 71, 0.25) 100%);
        }

        .city-card-journey:hover {
            border-color: rgba(247, 157, 0, 0.4);
            box-shadow:
                0 4px 8px rgba(247,157,0,0.04),
                0 8px 16px rgba(247,157,0,0.04),
                0 16px 32px rgba(247,157,0,0.06),
                0 24px 48px rgba(247,157,0,0.12),
                inset 0 1px 0 rgba(255, 255, 255, 1);
        }

        /* 旅程城市标签 - 精致版 */
        .journey-city-tag {
            display: inline-block;
            background: rgba(247, 157, 0, 0.08);
            color: var(--text-gold);
            padding: 0.4rem 1rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid rgba(247, 157, 0, 0.25);
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow:
                0 1px 2px rgba(247, 157, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .journey-city-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .journey-city-tag:hover {
            background: rgba(247, 157, 0, 0.15);
            transform: translateY(-2px);
            box-shadow:
                0 2px 4px rgba(247, 157, 0, 0.15),
                0 4px 8px rgba(247, 157, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            border-color: rgba(247, 157, 0, 0.35);
        }

        .journey-city-tag:hover::before {
            transform: translateX(100%);
        }

        /* 统计信息 */
        .journey-stats {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            border: 1px solid rgba(184, 146, 85, 0.1);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-number {
            font-family: 'Quicksand', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }

        .stat-label {
            font-family: 'Cinzel', serif;
            font-size: 0.7rem;
            color: var(--ink-grey);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            opacity: 0.6;
        }

        .stat-divider {
            width: 1px;
            height: 40px;
            background: linear-gradient(to bottom, transparent, var(--primary-color), transparent);
            opacity: 0.3;
        }

        /* 响应式优化 */
        @media (max-width: 768px) {
            .city-card {
                padding: 1.5rem;
            }

            .journey-stats {
                flex-direction: column;
                gap: 1.5rem;
            }

            .stat-divider {
                width: 60px;
                height: 1px;
                background: linear-gradient(to right, transparent, var(--primary-color), transparent);
            }

            .stat-number {
                font-size: 2rem;
            }
        }

        /* ============ 遇见·金句 日历组件样式 ============ */
        .daily-quote-section {
            padding: 4rem 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .daily-quote-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            height: 60px;
            background: linear-gradient(to bottom, transparent, var(--primary-color), transparent);
            opacity: 0.3;
        }

        .daily-quote-title {
            font-family: 'ZCOOL XiaoWei', 'Noto Serif SC', serif;
            font-size: 0.95rem;
            color: var(--ink-grey);
            text-align: center;
            margin-bottom: 2rem;
            letter-spacing: 0.18em;
            line-height: 2.1;
            opacity: 0.72;
            max-width: 36rem;
            margin-left: auto;
            margin-right: auto;
        }

        .calendar-container {
            max-width: 320px;
            margin: 0 auto;
            perspective: 1000px;
        }

        /* 日历封面（未撕开状态） */
        .calendar-cover {
            position: relative;
            background: linear-gradient(145deg, #FFFDF8 0%, #FFF8E7 50%, #FAEBD7 100%);
            border: 1px solid rgba(184, 146, 85, 0.3);
            border-radius: 16px;
            padding: 2.5rem 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08), 0 2px 10px rgba(0, 0, 0, 0.04);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: top center;
            overflow: hidden;
        }

        .calendar-cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg,
                    transparent 10%,
                    rgba(184, 146, 85, 0.3) 10%,
                    rgba(184, 146, 85, 0.3) 15%,
                    transparent 15%,
                    transparent 25%,
                    rgba(184, 146, 85, 0.3) 25%,
                    rgba(184, 146, 85, 0.3) 30%,
                    transparent 30%,
                    transparent 40%,
                    rgba(184, 146, 85, 0.3) 40%,
                    rgba(184, 146, 85, 0.3) 45%,
                    transparent 45%,
                    transparent 55%,
                    rgba(184, 146, 85, 0.3) 55%,
                    rgba(184, 146, 85, 0.3) 60%,
                    transparent 60%,
                    transparent 70%,
                    rgba(184, 146, 85, 0.3) 70%,
                    rgba(184, 146, 85, 0.3) 75%,
                    transparent 75%,
                    transparent 85%,
                    rgba(184, 146, 85, 0.3) 85%,
                    rgba(184, 146, 85, 0.3) 90%,
                    transparent 90%);
            border-radius: 16px 16px 0 0;
        }

        .calendar-cover:hover {
            transform: translateY(-4px) rotateX(2deg);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12), 0 4px 15px rgba(0, 0, 0, 0.06);
        }

        .calendar-cover:hover .calendar-curl {
            height: 25px;
            opacity: 0.6;
        }

        /* 页脚卷边效果 */
        .calendar-curl {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 50px;
            height: 15px;
            background: linear-gradient(135deg, transparent 50%, rgba(184, 146, 85, 0.2) 50%);
            border-radius: 0 0 16px 0;
            transition: all 0.3s ease;
            opacity: 0.4;
        }

        /* 火漆印章 */
        .wax-seal {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            position: relative;
            background: radial-gradient(circle at 30% 30%,
                    #C5A065 0%,
                    #A67C52 30%,
                    #8B6914 60%,
                    #6B5210 100%);
            border-radius: 50%;
            box-shadow:
                0 4px 15px rgba(139, 105, 20, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.3),
                inset 0 -2px 4px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            animation: sealPulse 3s ease-in-out infinite;
        }

        .wax-seal::before {
            content: '';
            position: absolute;
            inset: 3px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.15);
        }

        .wax-seal::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 22% 20%,
                    rgba(255, 255, 255, 0.35) 0%,
                    rgba(255, 255, 255, 0.12) 22%,
                    rgba(255, 255, 255, 0) 55%);
            pointer-events: none;
        }

        .wax-seal-icon {
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
        }

        @keyframes sealPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        /* 日历日期 */
        .calendar-date {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: #5D4037;
            text-align: center;
            margin-bottom: 1rem;
            letter-spacing: 0.1em;
        }

        /* 日历标签 */
        .calendar-label {
            font-family: 'Noto Serif SC', serif;
            font-size: 0.9rem;
            color: #8D6E63;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 0.15rem;
        }

        .calendar-label-main {
            font-weight: 600;
            letter-spacing: 0.12em;
        }

        .calendar-label-sub {
            font-family: 'Cinzel', serif;
            font-size: 0.7rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            opacity: 0.75;
        }

        /* 撕开后的明信片 */
        .quote-postcard {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15), 0 5px 20px rgba(0, 0, 0, 0.08);
            aspect-ratio: 3 / 4;
            max-height: 480px;
            background: linear-gradient(180deg, #fefbf6 0%, #f7f1e9 100%);
            --postcard-footer-ink: rgba(0, 0, 0, 0.42);
            --postcard-signature-ink: rgba(0, 0, 0, 0.66);
            --postcard-watermark-ink: rgba(0, 0, 0, 0.07);
        }

        .quote-postcard.gradient-bg-8 {
            --postcard-footer-ink: rgba(255, 255, 255, 0.72);
            --postcard-signature-ink: rgba(255, 255, 255, 0.92);
            --postcard-watermark-ink: rgba(255, 255, 255, 0.26);
        }

        .quote-postcard-bg {
            position: absolute;
            inset: 0;
            z-index: 0;
            background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.35), transparent 45%),
                radial-gradient(circle at 80% 10%, rgba(255, 255, 255, 0.25), transparent 45%),
                radial-gradient(circle at 10% 80%, rgba(255, 255, 255, 0.15), transparent 50%);
        }

        .quote-postcard-bg.quote-postcard-bg-image {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: saturate(0.88) contrast(1.05) brightness(0.96);
        }

        .quote-postcard-bg.quote-postcard-bg-image::after {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(180deg,
                    rgba(255, 255, 255, 0.36) 0%,
                    rgba(255, 255, 255, 0.48) 30%,
                    rgba(255, 255, 255, 0.38) 68%,
                    rgba(255, 255, 255, 0.18) 100%),
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n' x='0' y='0'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.55' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E");
            pointer-events: none;
            }

        .quote-name-watermark {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 6;
            pointer-events: none;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            font-size: 2.1rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--postcard-watermark-ink);
            text-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
            transform: rotate(-12deg);
        }

        .quote-postcard-content {
            position: relative;
            z-index: 10;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem 1.5rem;
            background: linear-gradient(180deg,
                    rgba(255, 255, 255, 0.1) 0%,
                    rgba(255, 255, 255, 0.3) 30%,
                    rgba(255, 255, 255, 0.3) 70%,
                    rgba(255, 255, 255, 0.1) 100%);
        }

        .quote-postcard-border {
            position: absolute;
            inset: 8px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            pointer-events: none;
            z-index: 5;
        }

        /* 装订与撕口质感 */
        .quote-binding {
            position: absolute;
            top: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 36px;
            z-index: 12;
            pointer-events: none;
        }

        .quote-binding .ring {
            width: 22px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.12);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.5));
        }

        .quote-stub {
            position: absolute;
            inset: 0;
            z-index: 4;
            pointer-events: none;
        }

        .quote-stub::before {
            content: '';
            position: absolute;
            top: 0;
            left: -18px;
            bottom: 0;
            width: 18px;
            background: linear-gradient(180deg, #fdf7ee 0%, #f3e6d8 100%);
            border-radius: 10px 0 0 10px;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, 0.05);
        }

        .quote-stub::after {
            content: '';
            position: absolute;
            top: 8px;
            left: -12px;
            bottom: 8px;
            width: 2px;
            background-image: repeating-linear-gradient(to bottom,
                    rgba(0, 0, 0, 0.08) 0,
                    rgba(0, 0, 0, 0.08) 4px,
                    transparent 4px,
                    transparent 8px);
            opacity: 0.7;
        }

        .quote-text {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.15rem;
            line-height: 2;
            color: #333;
            text-align: center;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
            max-width: 90%;
            margin-bottom: 1rem;
        }

        .quote-author {
            font-family: 'Noto Serif SC', serif;
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            opacity: 0.8;
        }

        .quote-footer {
            position: absolute;
            bottom: 1.5rem;
            left: 1.5rem;
            right: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            z-index: 15;
        }

        .quote-date-watermark {
            font-family: 'Noto Serif SC', serif;
            font-size: 0.7rem;
            color: var(--postcard-footer-ink);
            letter-spacing: 0.05em;
        }

        .quote-signature {
            text-align: right;
        }

        .quote-couple-name {
            font-family: 'Quicksand', sans-serif;
            font-size: 0.75rem;
            color: rgba(0, 0, 0, 0.5);
            letter-spacing: 0.05em;
        }

        .quote-love-you {
            font-family: 'Allura', 'Playfair Display', cursive;
            font-size: 1.35rem;
            color: var(--postcard-signature-ink);
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.32), 0 10px 24px rgba(0, 0, 0, 0.14);
        }

        /* 下载按钮 */
        .quote-download-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 20;
        }

        .quote-postcard:hover .quote-download-btn {
            opacity: 1;
        }

        .quote-download-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        /* 动画：撕开效果 */
        .calendar-cover.tearing {
            animation: tearAway 0.6s ease-out forwards;
        }

        @keyframes tearAway {
            0% {
                transform: translateY(0) rotateX(0) rotateZ(0);
                opacity: 1;
            }

            30% {
                transform: translateY(-18px) translateX(-4px) rotateX(-18deg) rotateZ(-2deg);
            }

            100% {
                transform: translateY(-120px) translateX(10px) rotateX(-55deg) rotateZ(8deg);
                opacity: 0;
            }
        }

        /* 撕裂纸屑：掉落的“撕下边” */
        .tear-scrap {
            position: fixed;
            height: 26px;
            border-radius: 0 0 14px 14px;
            background: linear-gradient(145deg, #FFFDF8 0%, #FFF8E7 50%, #FAEBD7 100%);
            border: 1px solid rgba(184, 146, 85, 0.25);
            border-top: none;
            box-shadow: 0 18px 35px rgba(0, 0, 0, 0.14);
            pointer-events: none;
            z-index: 10000;
            clip-path: polygon(0% 35%, 4% 18%, 9% 36%, 14% 12%, 19% 34%, 24% 10%, 30% 32%, 35% 14%, 41% 34%, 47% 12%, 53% 33%, 60% 10%, 67% 32%, 74% 14%, 81% 34%, 88% 12%, 94% 36%, 100% 26%, 100% 100%, 0% 100%);
            transform-origin: 20% 0%;
            animation: tearScrapFall 0.95s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes tearScrapFall {
            0% {
                opacity: 0;
                transform: translateY(0) rotate(0deg);
            }

            12% {
                opacity: 1;
            }

            55% {
                transform: translateY(140px) translateX(8px) rotate(10deg);
                opacity: 0.9;
            }

            100% {
                transform: translateY(240px) translateX(24px) rotate(18deg);
                opacity: 0;
            }
        }

        .quote-postcard.revealing {
            animation: revealCard 0.5s ease-out 0.4s forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes revealCard {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* CSS渐变背景库 */
        .gradient-bg-1 {
            background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%);
        }

        .gradient-bg-2 {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .gradient-bg-3 {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .gradient-bg-4 {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .gradient-bg-5 {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
        }

        .gradient-bg-6 {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
        }

        .gradient-bg-7 {
            background: linear-gradient(135deg, #96fbc4 0%, #f9f586 100%);
        }

        .gradient-bg-8 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gradient-bg-9 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .gradient-bg-10 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .gradient-bg-11 {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .gradient-bg-12 {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .gradient-bg-13 {
            background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
        }

        .gradient-bg-14 {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }

        .gradient-bg-15 {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .gradient-bg-16 {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        }

        .gradient-bg-17 {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        }

        .gradient-bg-18 {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .gradient-bg-19 {
            background: linear-gradient(135deg, #cfd9df 0%, #e2ebf0 100%);
        }

        .gradient-bg-20 {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
        }

        .gradient-bg-21 {
            background: linear-gradient(135deg, #f5f7fa 0%, #b8c6db 100%);
        }

        .gradient-bg-22 {
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
        }

        .gradient-bg-23 {
            background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%);
        }

        .gradient-bg-24 {
            background: linear-gradient(135deg, #ebc0fd 0%, #d9ded8 100%);
        }

        .gradient-bg-25 {
            background: linear-gradient(135deg, #f6f6f6 0%, #e9e9e9 100%);
        }

        .gradient-bg-26 {
            background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%);
        }

        .gradient-bg-27 {
            background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
        }

        .gradient-bg-28 {
            background: linear-gradient(135deg, #fddb92 0%, #d1fdff 100%);
        }

        .gradient-bg-29 {
            background: linear-gradient(135deg, #c1dfc4 0%, #deecdd 100%);
        }

        .gradient-bg-30 {
            background: linear-gradient(135deg, #faf0e6 0%, #e8dfd5 100%);
        }

        /* 响应式调整 */
        @media (min-width: 768px) {
            .calendar-container {
                max-width: 360px;
            }

            .quote-text {
                font-size: 1.25rem;
            }

            .wax-seal {
                width: 90px;
                height: 90px;
            }
        }

        @media (min-width: 1024px) {
            .calendar-container {
                max-width: 400px;
            }

            .quote-postcard {
                max-height: 540px;
            }
        }
    </style>
</head>

<body class="antialiased relative" tabindex="0">
    <div class="scroll-progress" id="scrollProgress"></div>

    <div class="entrance-overlay" id="entranceOverlay" role="region" aria-label="欢迎页面">
        <img src="ruby_heart_transparent.png" alt="红宝石爱心图标，象征16年的爱情" class="entrance-heart-img">
        <p class="entrance-title" id="entranceTitle">熊老婆，我们已经走过 16 年啦！</p>
        <p class="entrance-subtitle" id="entranceSubtitle">感恩有你 ❤️</p>
        <button class="entrance-btn" id="entranceBtn" aria-describedby="entranceTitle entranceSubtitle">
            <span>开启时光之旅</span>
        </button>
    </div>

    <div class="film-grain"></div>
    <div class="aurora-blob animate-float" style="top: 5%; left: -10%; width: 300px; height: 300px;"></div>
    <div class="aurora-blob animate-float"
        style="bottom: 15%; right: -10%; width: 250px; height: 250px; animation-delay: -3s;"></div>

    <div id="musicToast" class="music-toast eng-label text-xs text-gray-600">
        <div class="music-toast-icon"></div>
        <span>正在播放：遇见 (Piano Ver.) - 孙燕姿</span>
    </div>

    <button class="music-toggle" id="musicToggle" aria-label="播放或暂停背景音乐" aria-pressed="false" role="switch">
        <span class="music-icon-off" aria-hidden="true">
            <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M9 12H4m5 0v4m0-4V8m5 4h6"></path>
            </svg>
        </span>
        <span class="music-icon-on" aria-hidden="true">
            <div class="sound-wave"><span></span><span></span><span></span><span></span><span></span></div>
        </span>
    </button>

    <audio id="bgMusic" loop preload="auto" autoplay playsinline>
        <source src="meet_piano.mp3" type="audio/mpeg">
    </audio>

    <!-- 第一屏 -->
    <section class="min-h-screen flex flex-col justify-center items-center px-6 relative py-24">
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-white/40 to-transparent pointer-events-none">
        </div>
        <div class="date-stamp animate-fade-up" style="transition-delay: 0.8s">
            <span class="text-xs text-primary num-font" id="current-date-display"></span>
        </div>

        <div class="text-center z-10 w-full">
            <p class="text-xs tracking-[0.3em] mb-8 text-primary uppercase font-bold eng-label animate-fade-up"
                style="transition-delay: 0.1s">Since 2009.12.10</p>

            <div class="relative inline-block my-4 animate-fade-up" style="transition-delay: 0.2s">
                <h1 id="days-counter"
                    class="text-7xl md:text-9xl rounded-num-font text-primary leading-none drop-shadow-sm animate-pulse-1s">
                    0</h1>
                <div class="absolute -bottom-2 -right-6 text-lg md:text-xl text-gold-enhanced italic eng-title">Days
                </div>
            </div>

            <div class="w-20 h-[1px] bg-primary my-12 mx-auto opacity-40 animate-fade-up"
                style="transition-delay: 0.3s"></div>

            <p class="text-base md:text-lg text-gray-600 max-w-xs mx-auto leading-relaxed font-serif animate-fade-up"
                style="transition-delay: 0.4s">
                "爱是动词。<br>这是我们第 <span id="days-inline" class="font-bold text-primary"></span> 次选择彼此。"
            </p>
        </div>

        <div class="absolute bottom-10 animate-breathe text-primary opacity-60">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 14l-7 7m0 0l-7-7m7 7V3">
                </path>
            </svg>
        </div>
    </section>

    <!-- 遇见·金句 日历组件 -->
    <section class="daily-quote-section animate-fade-up" id="dailyQuoteSection">
        <p class="daily-quote-title">“每一个撕下日历的日子，都是我们在相爱。”</p>

        <div class="calendar-container" id="calendarContainer">
            <!-- 日历封面（未撕开状态） -->
            <div class="calendar-cover" id="calendarCover" role="button" tabindex="0" aria-label="撕开今天的共鸣">
                <!-- 活页环装饰（顶部） -->
                <div class="wax-seal">
                    <svg class="wax-seal-icon" viewBox="0 0 64 64" aria-hidden="true" focusable="false">
                        <defs>
                            <linearGradient id="sealIconMetal" x1="10" y1="8" x2="54" y2="56"
                                gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#ffffff" stop-opacity="0.95" />
                                <stop offset="0.45" stop-color="#ffffff" stop-opacity="0.55" />
                                <stop offset="1" stop-color="#ffffff" stop-opacity="0.22" />
                            </linearGradient>
                        </defs>
                        <path
                            d="M32 10l14 14-6 30H24L18 24 32 10z"
                            fill="url(#sealIconMetal)" />
                        <path
                            d="M32 10l14 14-6 30H24L18 24 32 10z"
                            fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="2"
                            stroke-linejoin="round" />
                        <circle cx="32" cy="32" r="4" fill="#ffffff" fill-opacity="0.55" />
                        <path d="M32 20v20" stroke="#ffffff" stroke-opacity="0.28" stroke-width="2"
                            stroke-linecap="round" />
                        <path d="M26.5 44.5l5.5-5.5 5.5 5.5" fill="none" stroke="#ffffff"
                            stroke-opacity="0.3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="calendar-date" id="calendarDate">2025年12月26日</div>
                <div class="calendar-label">
                    <span class="calendar-label-main">遇见·金句</span>
                    <span class="calendar-label-sub">today's resonance</span>
                </div>
                <div class="calendar-curl"></div>
            </div>

            <!-- 撕开后的明信片（默认隐藏） -->
            <div class="quote-postcard" id="quotePostcard" style="display: none;">
                <div class="quote-postcard-bg gradient-bg-1" id="quoteBg"></div>
                <div class="quote-postcard-border"></div>
                <div class="quote-binding"><span class="ring"></span><span class="ring"></span></div>
                <div class="quote-stub" aria-hidden="true"></div>
                <div class="quote-name-watermark" aria-hidden="true">Coria &amp; Minnie</div>
                <div class="quote-postcard-content">
                    <p class="quote-text" id="quoteText">"醒来觉得甚是爱你。"</p>
                    <p class="quote-author" id="quoteAuthor">—— 朱生豪</p>
                </div>
                <div class="quote-footer">
                    <div class="quote-date-watermark" id="quoteDateWatermark">2025年12月26日</div>
                    <div class="quote-signature">
                        <div class="quote-love-you">Love You</div>
                    </div>
                </div>
                <button class="quote-download-btn" id="quoteDownloadBtn" title="保存图片">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>
            </div>
        </div>
    </section>

    <!-- 第二屏 -->
    <section class="py-24 px-6 relative z-10">
        <div class="absolute inset-0 bg-white/40 skew-y-3 z-[-1]"></div>
        <div class="max-w-xl mx-auto space-y-8">
            <div class="text-center mb-12 animate-fade-up">
                <h3 class="text-lg font-bold text-primary tracking-widest eng-label">爱的物理刻度</h3>
            </div>
            <div class="grid grid-cols-2 gap-5">
                <div
                    class="bg-white/80 p-6 rounded-lg border border-[var(--light-color)] text-center shadow-sm backdrop-blur-sm animate-fade-up">
                    <div id="hours-counter" class="text-2xl num-font text-gray-800">0</div>
                    <div class="text-[10px] text-gray-400 mt-2 tracking-widest eng-label">Hours</div>
                </div>
                <div
                    class="bg-white/80 p-6 rounded-lg border border-[var(--light-color)] text-center shadow-sm backdrop-blur-sm animate-fade-up">
                    <div id="minutes-counter" class="text-2xl num-font text-gray-800">0</div>
                    <div class="text-[10px] text-gray-400 mt-2 tracking-widest eng-label">Minutes</div>
                </div>
                <div class="col-span-2 crystal-glass p-8 rounded-xl text-center text-primary animate-fade-up">
                    <div id="seconds-counter" class="text-4xl num-font relative z-10 font-bold">0</div>
                    <div class="text-[10px] text-[var(--ink-grey)] mt-3 relative z-10 tracking-widest eng-label">Seconds
                        Counting</div>
                </div>
            </div>
            <div
                class="mt-8 flex items-center justify-center space-x-3 text-primary bg-white p-5 rounded-full shadow-sm border border-[var(--light-color)] animate-fade-up">
                <svg class="w-6 h-6 animate-breathe fill-current" viewBox="0 0 24 24">
                    <path
                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                </svg>
                <div class="text-sm text-gray-600">
                    约 <span id="heartbeat-counter"
                        class="num-font font-bold text-primary text-lg heart-beat-num">0</span> 次心跳共振
                </div>
            </div>
            <div class="mt-24 jewelry-frame-container group cursor-pointer animate-fade-up w-fit relative mx-auto">
                <div
                    class="absolute inset-0 bg-gradient-to-tr from-[var(--light-color)] to-transparent opacity-30 rounded-full blur-3xl group-hover:opacity-50 transition-opacity">
                </div>
                <div class="jewelry-frame-inner">
                    <img src="p1.jpg" loading="lazy"
                        class="w-full h-full object-cover object-center group-hover:scale-105 transition duration-1000"
                        alt="复古风格照片">
                </div>
                <div class="jewelry-frame-glass-overlay"></div>
                <div class="corner-accent tl"></div>
                <div class="corner-accent br"></div>
            </div>
        </div>
    </section>

    <!-- 第三屏 -->
    <section class="py-24 px-6 relative overflow-hidden">
        <div class="absolute left-[8%] top-0 bottom-0 w-[1px] bg-primary opacity-10 hidden md:block"></div>
        <h3 class="text-center text-lg font-bold text-primary mb-16 tracking-widest eng-label animate-fade-up">闪闪发光的日子
        </h3>
        <div class="max-w-2xl mx-auto space-y-16 md:space-y-24">
            <div class="relative animate-fade-up">
                <div class="card-story rounded-tr-[40px]">
                    <div class="watermark-year">09</div>
                    <div class="relative z-10">
                        <div class="flex items-center space-x-3 mb-4">
                            <span class="eng-label text-xs font-bold text-primary border-b border-primary pb-1">DEC
                                10</span>
                            <span class="h-[1px] flex-grow bg-primary opacity-20"></span>
                        </div>
                        <h3 class="eng-title text-3xl text-[var(--ink-grey)] mb-5 italic">The Beginning</h3>
                        <p class="text-sm text-gray-600 leading-relaxed text-justify">
                            <span class="text-2xl float-left mr-2 mt-[-6px] eng-title text-primary">"</span>
                            我们在冬天相爱，<br>于是记忆里便全是暖色。<br>这一天，我们将"朋友"的标签撕下，郑重地贴上了"恋人"。
                        </p>
                    </div>
                </div>
            </div>
            <div class="relative animate-fade-up">
                <div class="card-partner rounded-tl-[40px] rounded-br-[40px] ml-auto w-[90%]">
                    <div class="watermark-year" style="right: auto; left: -2rem;">17</div>
                    <div class="relative z-10">
                        <div class="flex items-center space-x-3 mb-4 justify-end">
                            <span class="h-[1px] flex-grow bg-primary opacity-20"></span>
                            <span
                                class="eng-label text-xs font-bold text-gold-enhanced border-b border-[var(--text-gold)] pb-1">DEC
                                16</span>
                        </div>
                        <h3 class="eng-title text-3xl text-[var(--ink-grey)] mb-5 italic">Partners in Crime</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            法律见证下的盟约。<br>从此风雨同舟，<br>做彼此身后最坚实的盾。
                        </p>
                    </div>
                </div>
            </div>
            <div class="pull-quote-container animate-fade-up">
                <div class="pull-quote-mark">"</div>
                <div class="relative z-10 px-4">
                    <p class="text-[var(--ink-grey)] eng-title italic text-lg leading-loose text-center">
                        每一天，<br>你爱上的都是这个人的当下，<br>不是他的过去，<br>也不是过去的他。<br>
                        <span class="block mt-6 text-primary">每一天都是新的爱上，<br>每一天都是新的开始。</span>
                    </p>
                    <p class="text-xs text-primary mt-6 text-right eng-label opacity-80">—— FROM MINNIE</p>
                </div>
            </div>
            <div class="relative animate-fade-up">
                <div class="card-crystal-ultimate">
                    <div class="badge-today eng-label">TODAY</div>
                    <h3 class="eng-label text-4xl text-primary mb-2 tracking-wide">2025</h3>
                    <h4 class="eng-title text-xl text-gold-enhanced italic mb-6">16th Anniversary</h4>
                    <div class="flex justify-center items-center space-x-2 opacity-50 mb-6">
                        <span class="w-1 h-1 rounded-full bg-primary"></span>
                        <span class="w-12 h-[1px] bg-primary"></span>
                        <span class="w-1 h-1 rounded-full bg-primary"></span>
                    </div>
                    <p class="text-sm text-[var(--ink-grey)] font-medium leading-relaxed">
                        透明，坚韧，且珍贵。<br>十六年风雨打磨，<br>终成今日剔透水晶。<br>
                        <span
                            class="text-gold-enhanced opacity-80 mt-2 block text-xs tracking-widest uppercase eng-label">Coria
                            & Minnie</span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 城市足迹 -->
    <section class="py-24 px-6 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-b from-white/30 via-transparent to-white/30 pointer-events-none">
        </div>

        <div class="max-w-6xl mx-auto relative z-10">
            <div class="text-center mb-16 animate-fade-up">
                <h3 class="text-lg font-bold text-primary tracking-widest eng-label mb-3">2025 · 我们的足迹</h3>
                <p class="text-sm text-gray-500 eng-title italic">Every journey together is a story</p>
            </div>

            <!-- 城市卡片网格 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-12">
                <!-- 北京 - 家 -->
                <div class="city-card city-card-beijing animate-fade-up group">
                    <div class="absolute top-4 right-4">
                        <div class="text-3xl">🏠</div>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-amber-700 mb-2">北京</h4>
                        <p class="text-xs text-amber-600 mb-2 eng-label">常驻城市</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            我们的家，温暖的港湾
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 宣城 - 安徽 -->
                <div class="city-card city-card-anhui animate-fade-up group" style="transition-delay: 0.05s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-spring">春节</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-pink-600 mb-2">宣城</h4>
                        <p class="text-xs text-pink-500 mb-2 eng-label">安徽 · 2025 年 1 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            宣纸故里，千年墨香流芳
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 南京 - 江苏 -->
                <div class="city-card city-card-jiangsu animate-fade-up group" style="transition-delay: 0.1s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-spring">春节</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-indigo-600 mb-2">南京</h4>
                        <p class="text-xs text-indigo-500 mb-2 eng-label">江苏 · 2025 年 1 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            六朝古都，历史韵味
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 扬州 - 江苏 -->
                <div class="city-card city-card-jiangsu animate-fade-up group" style="transition-delay: 0.15s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-birthday">周岁宴</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-indigo-600 mb-2">扬州</h4>
                        <p class="text-xs text-indigo-500 mb-2 eng-label">江苏 · 2025 年 2 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            小绿周岁庆，烟花三月下扬州
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 上海 - 演唱会 -->
                <div class="city-card city-card-shanghai animate-fade-up group" style="transition-delay: 0.2s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-dream">圆梦</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-purple-600 mb-2">上海</h4>
                        <p class="text-xs text-purple-500 mb-2 eng-label">2025 年 4 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            孙燕姿《日落》演唱会，灯海同唱
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 银川 - 宁夏（五一假期） -->
                <div class="city-card city-card-ningxia animate-fade-up group" style="transition-delay: 0.25s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-mayday">五一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-amber-600 mb-2">银川</h4>
                        <p class="text-xs text-amber-500 mb-2 eng-label">宁夏 · 2025 年 5 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            塞上江南，黄河明珠
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 张掖 - 甘肃（五一假期） -->
                <div class="city-card city-card-gansu animate-fade-up group" style="transition-delay: 0.3s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-mayday">五一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-orange-600 mb-2">张掖</h4>
                        <p class="text-xs text-orange-500 mb-2 eng-label">甘肃 · 2025 年 5 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            丹霞地貌，色彩斑斓
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 武威 - 甘肃（五一假期） -->
                <div class="city-card city-card-gansu animate-fade-up group" style="transition-delay: 0.35s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-mayday">五一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-orange-600 mb-2">武威</h4>
                        <p class="text-xs text-orange-500 mb-2 eng-label">甘肃 · 2025 年 5 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            凉州古城，丝路重镇
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 嘉峪关 - 甘肃（五一假期） -->
                <div class="city-card city-card-gansu animate-fade-up group" style="transition-delay: 0.4s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-mayday">五一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-orange-600 mb-2">嘉峪关</h4>
                        <p class="text-xs text-orange-500 mb-2 eng-label">甘肃 · 2025 年 5 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            天下第一雄关，长城西端
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 西宁 - 青海（五一假期） -->
                <div class="city-card city-card-qinghai animate-fade-up group" style="transition-delay: 0.45s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-mayday">五一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-blue-600 mb-2">西宁</h4>
                        <p class="text-xs text-blue-500 mb-2 eng-label">青海 · 2025 年 5 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            高原明珠，青藏门户
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 广灵 - 山西（端午） -->
                <div class="city-card city-card-shanxi animate-fade-up group" style="transition-delay: 0.5s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-duanwu">端午</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-stone-600 mb-2">广灵</h4>
                        <p class="text-xs text-stone-500 mb-2 eng-label">山西 · 2025 年 6 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            夏日时光，山水相依
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 南昌 - 江西（十一假期） -->
                <div class="city-card city-card-jiangxi animate-fade-up group" style="transition-delay: 0.55s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-national">十一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-teal-600 mb-2">南昌</h4>
                        <p class="text-xs text-teal-500 mb-2 eng-label">江西 · 2025 年 10 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            英雄城南昌，赣江明珠
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 景德镇 - 江西（十一假期） -->
                <div class="city-card city-card-jiangxi animate-fade-up group" style="transition-delay: 0.6s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-national">十一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-teal-600 mb-2">景德镇</h4>
                        <p class="text-xs text-teal-500 mb-2 eng-label">江西 · 2025 年 10 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            千年瓷都，青瓷之乡
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 庐山 - 江西（十一假期） -->
                <div class="city-card city-card-jiangxi animate-fade-up group" style="transition-delay: 0.65s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge city-badge-national">十一假期</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-teal-600 mb-2">庐山</h4>
                        <p class="text-xs text-teal-500 mb-2 eng-label">江西 · 2025 年 10 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            登临庐山，望云海茫茫
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 郑州 - 河南 -->
                <div class="city-card city-card-henan animate-fade-up group" style="transition-delay: 0.7s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge">中原腹地</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-yellow-600 mb-2">郑州</h4>
                        <p class="text-xs text-yellow-500 mb-2 eng-label">河南 · 2025 年 11 月</p>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            只此青绿，省博里读懂千年
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>

                <!-- 厦门 - 福建 -->
                <div class="city-card city-card-fujian animate-fade-up group" style="transition-delay: 0.75s">
                    <div class="absolute top-4 right-4">
                        <span class="city-badge">美食</span>
                    </div>
                    <div class="city-card-content">
                        <h4 class="text-2xl font-bold text-sky-600 mb-2">厦门</h4>
                        <p class="text-xs text-sky-500 mb-2 eng-label">福建 · 2025 年 11 月</p>
                        <!-- 厦门文案：突出“集美”地点，提醒上线是否生效可以看这一行是否带有“集美街头”关键字（版本戳：2025-12-10-02） -->
                        <p class="text-sm text-gray-700 leading-relaxed">
                            探望友人出院后，在集美街头大快朵颐闽南小吃
                        </p>
                    </div>
                    <div class="city-card-decoration"></div>
                </div>
            </div>

            <!-- 统计信息 -->
            <div class="journey-stats animate-fade-up" style="transition-delay: 0.5s">
                <div class="stat-item">
                    <span class="stat-number">15</span>
                    <span class="stat-label">Cities</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-number">2025</span>
                    <span class="stat-label">This Year</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-number">∞</span>
                    <span class="stat-label">Memories</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <section class="py-24 px-6 bg-[#262626] text-center relative overflow-hidden">
        <div class="absolute inset-0 bg-black/20 pointer-events-none"></div>
        <div
            class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[var(--primary-color)] to-transparent opacity-50">
        </div>
        <div class="relative z-10">
            <p class="text-[10px] tracking-[0.3em] text-gray-400 mb-8 uppercase eng-label animate-fade-up">Next Station:
                Rose Wedding</p>
            <h2 class="text-2xl text-[var(--bg-paper)] font-light mb-12 leading-relaxed font-serif animate-fade-up">第 17
                年<br>是馥郁的<span class="text-primary eng-title italic mx-1">玫瑰婚</span></h2>
            <button id="actionBtn"
                class="cta-btn group relative px-10 py-5 bg-transparent overflow-visible rounded-full border border-[var(--text-gold-light)] text-[var(--text-gold-light)] transition-all hover:bg-[var(--text-gold)] hover:text-white hover:border-[var(--text-gold)] hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--text-gold)] focus:ring-offset-2 focus:ring-offset-[#262626] animate-fade-up">
                <span class="relative z-10 font-bold tracking-widest text-sm eng-label">开启第 17 年的玫瑰之旅 →</span>
            </button>
            <p class="mt-20 text-[10px] text-gray-500 num-font opacity-60 animate-fade-up">2009 - 2025 © Coria & Minnie
            </p>
        </div>
    </section>

    <!-- 模态框：加了内联 style="display: none;" 确保绝对隐藏 -->
    <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title"
        aria-describedby="modal-description" style="display: none;">
        <div class="modal-content" id="modal-content-inner" tabindex="-1" role="document">
            <button id="closeModalBtn" class="close-btn" aria-label="关闭">
                <span class="text-2xl text-gray-600" aria-hidden="true">&times;</span>
            </button>
            <div class="amber-card">
                <div class="aspect-[4/5] bg-gray-100 mb-5 relative overflow-hidden rounded-lg">
                    <!-- 这里是厦门照片的占位，你把 src 换成你的照片即可 -->
                    <img src="p2.jpg" loading="lazy" class="w-full h-full object-cover filter contrast-110 sepia-[.1]"
                        alt="两人甜蜜合照">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none">
                    </div>
                </div>
                <div class="text-center px-2 relative z-10">
                    <h3 id="modal-title" class="text-primary font-bold text-lg mb-2 eng-label">Contract Renewed</h3>
                    <div class="h-[1px] w-12 bg-gray-200 mx-auto my-4"></div>
                    <p id="modal-description" class="text-sm text-[var(--ink-grey)] eng-title leading-loose italic">
                        "只要和你在一起，<br>无时无刻不从容。"
                    </p>
                    <p class="text-[10px] text-gray-400 mt-6 uppercase tracking-widest eng-label">Authorized by Minnie
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入金句库 -->
    <script src="quotes.js"></script>
    <!-- 引入html2canvas用于图片下载 -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script>
        const CONFIG = {
            startDate: new Date('2009-12-10T00:00:00+08:00').getTime(),
            entranceDelay: 2500,
            numberAnimationDuration: 2000
        };

        // ============ 主题引擎 ============
        function checkAnniversaryTheme() {
            // 已禁用自动变色：始终使用默认玫瑰色主题
            document.body.classList.remove('theme-mist');
            console.log("Theme: Mode Default (Rose)");
        }

        function easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); }
        function animateNumber(element, target, duration = CONFIG.numberAnimationDuration, format = true) {
            if (!element) return; // 空值保护，防止 DOM 元素不存在时报错
            const start = 0; const startTime = performance.now();
            function update(currentTime) {
                const elapsed = currentTime - startTime; const progress = Math.min(elapsed / duration, 1);
                const eased = easeOutCubic(progress); const current = Math.floor(start + (target - start) * eased);
                if (element.id === 'days-counter') element.textContent = current;
                else element.textContent = format ? current.toLocaleString() : current;
                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        }
        // 点击进入逻辑：用户点击按钮后触发音乐和入场动画
        function handleEntrance() {
            const overlay = document.getElementById('entranceOverlay');
            const entranceBtn = document.getElementById('entranceBtn');

            entranceBtn.addEventListener('click', function () {
                // 1. 播放音乐（用户点击后浏览器允许播放）
                startMusic();

                // 2. 触发撒花庆祝
                triggerConfetti();

                // 3. 隐藏入场页
                overlay.classList.add('hidden');

                // 4. 触发页面入场动画
                document.querySelectorAll('.animate-fade-up').forEach((el, index) => {
                    setTimeout(() => el.classList.add('visible'), index * 100);
                });

                // 5. 启动计数器动画
                const now = new Date().getTime();
                const distance = now - CONFIG.startDate;
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                animateNumber(document.getElementById('days-counter'), days, 2000, false);
                document.getElementById('days-inline').textContent = days;
            });
        }
        function updateDateDisplay() {
            const now = new Date();
            const dateString = now.getFullYear() + '.' + String(now.getMonth() + 1).padStart(2, '0') + '.' + String(now.getDate()).padStart(2, '0');
            document.getElementById('current-date-display').textContent = dateString;
        }
        function updateTimer() {
            const now = new Date().getTime();
            const distance = now - CONFIG.startDate;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            if (document.getElementById('entranceOverlay').classList.contains('hidden')) {
                document.getElementById('days-counter').textContent = days;
                document.getElementById('days-inline').textContent = days;
            }
            document.getElementById('hours-counter').textContent = hours;
            document.getElementById('minutes-counter').textContent = minutes;
            document.getElementById('seconds-counter').textContent = seconds;
            const totalMinutes = BigInt(Math.floor(distance / (1000 * 60)));
            const heartbeats = totalMinutes * 75n; // 使用 BigInt 避免大数精度问题
            // 直接显示纯数字,不添加分隔符
            document.getElementById('heartbeat-counter').textContent = heartbeats.toString();
        }
        function handleScroll() {
            const scrollTop = window.scrollY; const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = docHeight > 0 ? scrollTop / docHeight : 0;
            document.getElementById('scrollProgress').style.transform = `scaleX(${progress})`;
            document.querySelectorAll('.animate-fade-up:not(.visible)').forEach(el => {
                const rect = el.getBoundingClientRect();
                if (rect.top < window.innerHeight * 0.85) el.classList.add('visible');
            });
        }

        // 模态框逻辑修复：操作 style 属性
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content-inner');
        const actionBtn = document.getElementById('actionBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        let lastFocusedElement = null;

        function openModal() {
            lastFocusedElement = document.activeElement;
            modal.style.display = 'flex'; // JS 强制显示
            // 稍后添加 class 触发动画
            setTimeout(() => {
                modal.classList.add('modal-active');
            }, 10);
            document.body.style.overflow = 'hidden';
            setTimeout(() => closeModalBtn.focus(), 100);
        }

        function closeModal() {
            modal.classList.remove('modal-active');
            document.body.style.overflow = '';
            // 等动画结束再隐藏
            setTimeout(() => {
                modal.style.display = 'none'; // JS 强制隐藏
            }, 300);
            if (lastFocusedElement) lastFocusedElement.focus();
        }

        function triggerConfetti() {
            const duration = 3000; const animationEnd = Date.now() + duration;
            const isMist = document.body.classList.contains('theme-mist');
            const colors = isMist ? ['#5F8D84', '#7DAEA5', '#ffffff', '#8B6914'] : ['#B05D67', '#C5A065', '#ffffff', '#E8D3D5'];
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 2000, colors: colors };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            const interval = setInterval(function () {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }
        actionBtn.addEventListener('click', function () { this.classList.add('burst'); setTimeout(() => this.classList.remove('burst'), 600); triggerConfetti(); openModal(); });
        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('mousedown', function (e) { if (e.target === modal) closeModal(); }); // 使用 mousedown 避免拖拽时误关闭 
        document.addEventListener('keydown', function (e) { if (e.key === 'Escape' && modal.classList.contains('modal-active')) closeModal(); });

        const musicToggle = document.getElementById('musicToggle'); const bgMusic = document.getElementById('bgMusic'); const musicToast = document.getElementById('musicToast');
        let isPlaying = false; let toastTimer; let autoplayAttempts = 0; let autoplayLocked = false;
        function showMusicToast() {
            clearTimeout(toastTimer); musicToast.classList.add('show'); toastTimer = setTimeout(() => musicToast.classList.remove('show'), 4000);
        }
        function startMusic(isAuto = false) {
            if (isAuto && autoplayLocked) return;
            bgMusic.volume = 0.35; bgMusic.loop = true; bgMusic.autoplay = true;
            bgMusic.play().then(() => { if (isAuto) { autoplayLocked = true; autoplayAttempts = 0; } }).catch(e => {
                if (isAuto && autoplayAttempts < 3) { autoplayAttempts += 1; setTimeout(() => startMusic(true), 800); }
                console.log('Autoplay prevented:', e);
            });
        }
        function autoPlayWithRetry() { autoplayAttempts = 0; startMusic(true); }
        bgMusic.addEventListener('play', function () {
            isPlaying = true; musicToggle.classList.add('playing'); musicToggle.setAttribute('aria-pressed', 'true'); showMusicToast();
        });
        bgMusic.addEventListener('pause', function () {
            isPlaying = false; musicToggle.classList.remove('playing'); musicToggle.setAttribute('aria-pressed', 'false'); musicToast.classList.remove('show'); clearTimeout(toastTimer);
        });
        musicToggle.addEventListener('click', function () {
            if (bgMusic.paused) { startMusic(); }
            else { bgMusic.pause(); autoplayLocked = true; }
        });

        document.addEventListener('DOMContentLoaded', function () {
            checkAnniversaryTheme();
            updateDateDisplay();
            handleEntrance(); // 绑定入场按钮点击事件
            setInterval(updateTimer, 1000);
            updateTimer();
            // 初始化日历组件
            initDailyQuote();
            // 移除自动播放尝试，改为用户点击后播放
            let scrollTimeout;
            window.addEventListener('scroll', function () {
                if (!scrollTimeout) {
                    scrollTimeout = setTimeout(function () { handleScroll(); scrollTimeout = null; }, 16);
                }
            }, { passive: true });
            handleScroll();
        });
        // 移除 window.load 和 visibilitychange 的自动播放逻辑

        let lastTap = 0; document.addEventListener('touchend', function (e) {
            const currentTime = new Date().getTime(); const tapLength = currentTime - lastTap;
            const isMist = document.body.classList.contains('theme-mist');
            const colors = isMist ? ['#5F8D84', '#7DAEA5', '#ffffff'] : ['#B05D67', '#C5A065', '#ffffff'];
            if (tapLength < 300 && tapLength > 0) { confetti({ particleCount: 30, spread: 60, origin: { x: e.changedTouches[0].clientX / window.innerWidth, y: e.changedTouches[0].clientY / window.innerHeight }, colors: colors }); }
            lastTap = currentTime;
        });
        document.addEventListener('dblclick', function (e) {
            if (e.target.closest('button') || e.target.closest('a')) return;
            const isMist = document.body.classList.contains('theme-mist');
            const colors = isMist ? ['#5F8D84', '#7DAEA5', '#ffffff'] : ['#B05D67', '#C5A065', '#ffffff'];
            confetti({ particleCount: 30, spread: 60, origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight }, colors: colors });
        });

	        // ============ 遇见·金句 日历组件逻辑 ============

        // 种子随机数生成器（基于日期，保证同一天返回相同结果）
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        // 获取今日种子（基于日期）
        function getTodaySeed() {
            const now = new Date();
            const dateStr = now.getFullYear() * 10000 + (now.getMonth() + 1) * 100 + now.getDate();
            return dateStr;
        }

        // 格式化日期为中文格式
        function formatDateChinese(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}年${month}月${day}日`;
        }

        // 获取今日金句（基于种子随机）
        function getTodayQuote() {
            const seed = getTodaySeed();
            const index = Math.floor(seededRandom(seed) * LOVE_QUOTES.length);
            return LOVE_QUOTES[index];
        }

	        // 获取今日背景渐变编号（1-30）
	        function getTodayGradient() {
	            const seed = getTodaySeed() + 123456; // 使用不同的偏移量，确保与金句不同步
	            return Math.floor(seededRandom(seed) * 30) + 1;
	        }

	        // 精选艺术图集（推荐：放本地低饱和高清图；如 calendar-backgrounds/01.jpg）
	        // 说明：静态网页无法自动读取文件夹内容，需要手动把文件名写在这里。
        const CURATED_BACKGROUND_IMAGES = [
            // 推荐：把本地精选图放入 calendar-backgrounds/ 并改成相对路径
            // 示例占位图（低饱和、高质感，需网络访问）：
            'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1487412947147-5cebf100ffc2?auto=format&fit=crop&w=1200&q=80'
        ];

	        function getTodayBackgroundChoice() {
	            if (CURATED_BACKGROUND_IMAGES.length === 0) {
	                return { type: 'gradient', gradientNum: getTodayGradient() };
	            }
	            const seed = getTodaySeed() + 654321;
	            const index = Math.floor(seededRandom(seed) * CURATED_BACKGROUND_IMAGES.length);
	            return {
	                type: 'image',
	                url: CURATED_BACKGROUND_IMAGES[index],
	                fallbackGradientNum: getTodayGradient()
	            };
	        }

	        function clearGradientClasses(element) {
	            Array.from(element.classList).forEach(cls => {
	                if (cls.startsWith('gradient-bg-')) element.classList.remove(cls);
	            });
	        }

	        function applyPostcardBackground(choice) {
	            const postcard = document.getElementById('quotePostcard');
	            const quoteBg = document.getElementById('quoteBg');

	            clearGradientClasses(postcard);
	            clearGradientClasses(quoteBg);
	            quoteBg.classList.remove('quote-postcard-bg-image');
	            quoteBg.style.backgroundImage = '';

	            if (choice.type === 'image') {
	                quoteBg.classList.add('quote-postcard-bg-image');
	                quoteBg.style.backgroundImage = `url("${choice.url}")`;
	                // 同时加一个渐变 class 用于深色文案/水印样式兜底（下载也更稳定）
	                const fallback = choice.fallbackGradientNum ?? 1;
	                postcard.classList.add(`gradient-bg-${fallback}`);
	                quoteBg.classList.add(`gradient-bg-${fallback}`);
	                return;
	            }

	            postcard.classList.add(`gradient-bg-${choice.gradientNum}`);
	            quoteBg.classList.add(`gradient-bg-${choice.gradientNum}`);
	        }

        // 检查今天是否已经撕开
        function checkTodayOpened() {
            const todayKey = 'dailyQuote_' + getTodaySeed();
            return localStorage.getItem(todayKey) === 'opened';
        }

        // 标记今天已撕开
        function markTodayOpened() {
            const todayKey = 'dailyQuote_' + getTodaySeed();
            localStorage.setItem(todayKey, 'opened');
        }

	        // 显示明信片内容
	        function showPostcard() {
	            const quote = getTodayQuote();
	            const bgChoice = getTodayBackgroundChoice();
	            const today = formatDateChinese(new Date());

	            // 更新内容
	            document.getElementById('quoteText').textContent = '“' + quote.content + '”';
	            document.getElementById('quoteAuthor').textContent = '—— ' + quote.author;
	            document.getElementById('quoteDateWatermark').textContent = today;

	            // 更新背景
	            applyPostcardBackground(bgChoice);

            // 显示明信片
            document.getElementById('quotePostcard').style.display = 'block';
            document.getElementById('quotePostcard').classList.add('revealing');
        }

	        // 撕开日历动画
	        function tearCalendar() {
	            const cover = document.getElementById('calendarCover');
	            const postcard = document.getElementById('quotePostcard');

	            if (!cover || cover.classList.contains('tearing')) return;
	            cover.style.pointerEvents = 'none';

	            const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

	            // 播裂纸屑（更真实的撕纸质感）
	            if (!prefersReducedMotion) {
	                const rect = cover.getBoundingClientRect();
	                const scrap = document.createElement('div');
	                scrap.className = 'tear-scrap';
	                scrap.style.left = `${rect.left}px`;
	                scrap.style.top = `${Math.round(rect.top) + 6}px`;
	                scrap.style.width = `${rect.width}px`;
	                document.body.appendChild(scrap);
	                scrap.addEventListener('animationend', () => scrap.remove(), { once: true });
	            }

	            if (prefersReducedMotion) {
	                cover.style.display = 'none';
	                showPostcard();
	                markTodayOpened();
	                postcard.classList.remove('revealing');
	                postcard.style.opacity = '1';
	                postcard.style.transform = 'translateY(0)';
	                return;
	            }

	            // 添加撕开动画
	            cover.classList.add('tearing');

	            // 动画结束后隐藏封面，显示明信片
	            setTimeout(() => {
	                cover.style.display = 'none';
	                showPostcard();
                markTodayOpened();
            }, 600);
        }

        // 下载明信片为图片
        function downloadPostcard() {
            const postcard = document.getElementById('quotePostcard');
            const downloadBtn = document.getElementById('quoteDownloadBtn');

            // 临时隐藏下载按钮
            downloadBtn.style.display = 'none';

            html2canvas(postcard, {
                scale: 3, // 高清3倍渲染
                useCORS: true,
                backgroundColor: null
            }).then(canvas => {
                // 恢复下载按钮
                downloadBtn.style.display = 'flex';

                // 下载图片
                const link = document.createElement('a');
                const today = new Date();
                const fileName = `爱的金句_${today.getFullYear()}${String(today.getMonth() + 1).padStart(2, '0')}${String(today.getDate()).padStart(2, '0')}.png`;
                link.download = fileName;
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(err => {
                console.error('下载失败:', err);
                downloadBtn.style.display = 'flex';
            });
        }

	        // 初始化日历组件
	        function initDailyQuote() {
            const today = formatDateChinese(new Date());
            const cover = document.getElementById('calendarCover');
            const postcard = document.getElementById('quotePostcard');

            // 更新日历封面日期
            document.getElementById('calendarDate').textContent = today;

            // 检查今天是否已撕开
            if (checkTodayOpened()) {
                // 已撕开，直接显示明信片
                cover.style.display = 'none';
                showPostcard();
                // 移除动画类，直接显示
                setTimeout(() => {
                    postcard.classList.remove('revealing');
                    postcard.style.opacity = '1';
                    postcard.style.transform = 'translateY(0)';
                }, 100);
	            } else {
	                // 未撕开，绑定点击事件
	                cover.addEventListener('click', tearCalendar);
	                cover.addEventListener('keydown', function (e) {
	                    if (e.key !== 'Enter' && e.key !== ' ') return;
	                    e.preventDefault();
	                    tearCalendar();
	                });
	            }

            // 绑定下载按钮
            document.getElementById('quoteDownloadBtn').addEventListener('click', function (e) {
                e.stopPropagation();
                downloadPostcard();
            });
        }
    </script>
</body>

</html>
